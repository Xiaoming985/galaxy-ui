import{d as I,c as M,n as N,o as _,f as $,h as y,j as E,s as F,x as C,y as j,af as D,ag as H,b as p,v as T,C as w,r as L,t as O,z as V,D as Y,T as A,ah as v,ai as h,aj as q,ak as x}from"./framework.f5c9e82e.js";const P=(e,s)=>{if(e.install=t=>{for(const a of[e,...Object.values(s??{})])t.component(a.name,a)},s)for(const[t,a]of Object.entries(s))e[t]=a;return e},U=(e,s)=>(e.install=t=>{e._context=t._context,t.config.globalProperties[s]=e},e),B=["success","info","warning","error"],G={duration:{type:Number,default:3e3},message:{type:[String,Object,Function]},dangerouslyUseHTMLString:{type:Boolean,default:!1},icon:{type:String,default:""},id:{type:String,default:""},onClose:{type:Function,required:!1},closeable:{type:Boolean,default:!1},type:{type:String,values:B,default:"info"},offset:{type:Number,default:20},zIndex:{type:Number,default:0},grouping:{type:Boolean,default:!1},repeatNum:{type:Number,default:1},center:{type:Boolean,default:!1}},J={name:"YumIcon"},K=I({...J,props:{name:{type:String,default:""}},setup(e){return(s,t)=>(_(),M("i",{class:N(`yum-icon-${e.name}`)},null,2))}}),S=P(K),Q=["id"],R={class:"yum-message__content"},W=I({__name:"message",props:G,emits:["destroy","close"],setup(e,{emit:s}){const t={info:"details",success:"check_circle",error:"close_circle",warning:"warn"},a=s;let c=$(!1);const n=e,o=()=>c.value=!1,r=()=>{a("close")},m=y(()=>{const{type:i}=n;return t[i]});let u=null;const d=()=>{n.duration>0&&(u=setTimeout(()=>{c.value=!1},n.duration))},f=()=>{clearTimeout(Number(u))};E(()=>{c.value=!0,d()});let k=y(()=>({top:`${n.offset}px`,zIndex:n.zIndex}));const z=y(()=>["yum-message--"+n.type,n.center?"is-center":""]);return F(()=>{f()}),(i,b)=>(_(),C(A,{name:"yum-message-fade",onBeforeLeave:r,onAfterLeave:b[0]||(b[0]=te=>i.$emit("destroy"))},{default:j(()=>[D(T("div",{id:i.id,class:N(["yum-message",z.value]),style:Y(p(k)),onMouseenter:f,onMouseleave:d},[w(p(S),{name:m.value,class:"yum-message__icon"},null,8,["name"]),L(i.$slots,"default",{},()=>[T("span",R,O(i.message),1)]),i.closeable?(_(),C(p(S),{key:0,name:"close",class:"yum-message__close-btn",onClick:o})):V("",!0)],46,Q),[[H,p(c)]])]),_:3}))}});let X=1,l=[],Z=2e3;const g=function(e={},s){(v(e)||h(e))&&(e={message:e});const t=`message_${X++}`;let a=20;l.forEach(d=>{var f;a+=((f=d.el)==null?void 0:f.offsetHeight)+16});const c=e.onClose,n={...e,zIndex:Z++,id:t,offset:a,onClose:()=>{ee(t,c)}},o=n.message,r=w(W,n,q(o)?{default:o}:h(o)?{default:()=>o}:null);r.props.onDestroy=()=>{x(null,m)};const m=document.createElement("div");x(r,m);let u=document.body;return v(e.appendTo)?u=document.querySelector(e.appendTo):e.appendTo&&e.appendTo instanceof Element&&(u=e.appendTo),u.appendChild(m.firstElementChild),l.push(r),{close:()=>r.component.proxy.visible=!1}};B.forEach(e=>{g[e]=(s={},t)=>{(v(s)||h(s))&&(s={message:s}),g({...s,type:e})}});function ee(e,s){var n;const t=l.findIndex(o=>o.props.id===e);if(t===-1)return;const a=l[t];s&&s(a),l.splice(t,1);const c=a.el.offsetHeight;for(let o=t;o<l.length;o++){const r=parseInt((n=l[o].el)==null?void 0:n.style.top)-c+-16;l[o].component.props.offset=r}}function se(){for(let e=l.length-1;e>=0;e--){const s=l[e].component;(s==null?void 0:s.proxy).close()}}g.closeAll=se;const oe=U(g,"$message");export{G as M,oe as Y,S as a,B as m,P as w};
